{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "UK Fuel Prices: The 2022 Energy Crisis",
    "subtitle": "Weekly pump prices (2019-2025) showing the dramatic spike during the Russia-Ukraine conflict"
  },
  "data": {
    "url": "project/vis4_fuel_weekly.json"
  },
  "width": "container",
  "height": 400,
  "transform": [
    {
      "calculate": "toDate(datum.date)",
      "as": "d"
    },
    {
      "fold": [
        "unleaded_ppl",
        "diesel_ppl"
      ],
      "as": [
        "fuel_type",
        "price"
      ]
    },
    {
      "calculate": "datum.fuel_type === 'unleaded_ppl' ? 'Unleaded (petrol)' : 'Diesel'",
      "as": "fuel"
    }
  ],
  "layer": [
    {
      "mark": {
        "type": "line",
        "strokeWidth": 2.5
      },
      "encoding": {
        "x": {
          "field": "d",
          "type": "temporal",
          "title": "Date",
          "axis": {
            "format": "%Y",
            "tickCount": 7
          }
        },
        "y": {
          "field": "price",
          "type": "quantitative",
          "title": "Pence per litre"
        },
        "color": {
          "field": "fuel",
          "type": "nominal",
          "scale": {
            "range": [
              "#1e40af",
              "#d97706"
            ]
          },
          "legend": {
            "orient": "top",
            "direction": "horizontal",
            "title": null
          }
        },
        "tooltip": [
          {
            "field": "d",
            "type": "temporal",
            "title": "Week",
            "format": "%b %d, %Y"
          },
          {
            "field": "fuel",
            "type": "nominal",
            "title": "Fuel type"
          },
          {
            "field": "price",
            "type": "quantitative",
            "title": "Price (p)",
            "format": ".1f"
          }
        ]
      }
    }
  ]
}