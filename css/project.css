/* ===========================
   project.css (FULL REPLACEMENT)
   Fixes: grey/shaded overlay, “second frame”, responsive charts
   =========================== */

/* ---------- Reset ---------- */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: #0f172a;
  background: #ffffff;
  line-height: 1.5;

  /* CRITICAL: prevent global dimming */
  opacity: 1 !important;
  filter: none !important;
}

/* ---------- KILL ANY PAGE OVERLAY (most common cause of “grey film”) ---------- */
/* 1) Stop pseudo-element overlays */
html::before,
html::after,
body::before,
body::after,
main::before,
main::after,
header::before,
header::after,
.container::before,
.container::after {
  content: none !important;
  display: none !important;
}

/* 2) If you have an overlay/backdrop element, force it off */
.overlay,
.backdrop,
.modal-backdrop,
.dim,
.shade,
.scrim,
.screen,
.page-overlay,
#overlay,
#backdrop {
  display: none !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* 3) In case some overlay is implemented as a fixed layer */
.overlay,
.backdrop,
.modal-backdrop,
.dim,
.shade,
.scrim,
.screen,
.page-overlay,
#overlay,
#backdrop {
  position: static !important;
  inset: auto !important;
}

/* ---------- Layout ---------- */
.container {
  width: min(1100px, 92vw);
  margin: 0 auto;
  opacity: 1 !important;
  filter: none !important;
}

section {
  padding: 28px 0;
  opacity: 1 !important;
  filter: none !important;
}

/* ---------- Header (hero) ---------- */
header {
  background: #0b1a33;
  color: #ffffff;
  padding: 48px 0 32px;

  /* Make sure header doesn't create an overlay or stacking issue */
  position: relative;
  z-index: 0;
  opacity: 1 !important;
  filter: none !important;
}

header * {
  opacity: 1 !important;
  filter: none !important;
}

h1 {
  font-size: clamp(2.2rem, 3.2vw, 3.6rem);
  line-height: 1.05;
  margin: 0 0 10px 0;
  letter-spacing: -0.02em;
}

header p {
  margin: 0;
  font-size: 1.15rem;
  color: rgba(255, 255, 255, 0.85);
}

/* ---------- Typography ---------- */
h2 {
  font-size: 2rem;
  margin: 22px 0 10px;
  letter-spacing: -0.01em;
}

h3 {
  font-size: 1.35rem;
  margin: 18px 0 8px;
}

p {
  margin: 0 0 12px;
  color: #1f2937;
}

/* ---------- Chart layout ---------- */
.chart-block {
  margin: 20px 0 34px;
}

.chart-frame {
  border: 3px solid #d9def0;
  border-radius: 36px;
  padding: 18px 18px 16px;
  background: #ffffff;
  box-shadow: 0 10px 24px rgba(2, 6, 23, 0.06);

  /* Prevent charts spilling outside the rounded card */
  overflow: hidden;

  /* CRITICAL: prevent “dimming wrappers” */
  opacity: 1 !important;
  filter: none !important;
}

.chart {
  width: 100%;
  display: block;
}

/* Vega-Embed wrapper should fill the available width */
.chart .vega-embed {
  width: 100% !important;
  max-width: 100% !important;
}

/* Ensure embedded SVG scales responsively */
.chart .vega-embed svg {
  width: 100% !important;
  height: auto !important;
  display: block;
}

/* Hide Vega action links */
.chart-frame .vega-embed .vega-actions {
  display: none !important;
}

/* Source line under charts */
.source {
  margin-top: 10px;
  font-size: 0.95rem;
  color: #475569;
}

/* ---------- Responsive tweaks ---------- */
@media (max-width: 640px) {
  .chart-frame {
    border-radius: 26px;
    padding: 14px;
  }
}
