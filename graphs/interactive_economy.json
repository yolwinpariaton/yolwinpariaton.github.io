{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "UK Economic Indicators Dashboard",
    "subtitle": "Interactive exploration of key economic metrics 2010-2023",
    "fontSize": 18,
    "fontWeight": "bold",
    "color": "#2c3e50",
    "subtitleFontSize": 14,
    "subtitleColor": "#7f8c8d",
    "anchor": "start"
  },
  "width": 550,
  "height": 400,
  "data": {
    "values": [
      {"year": 2010, "indicator": "GDP Growth", "value": 1.9, "category": "Growth"},
      {"year": 2011, "indicator": "GDP Growth", "value": 1.5, "category": "Growth"},
      {"year": 2012, "indicator": "GDP Growth", "value": 1.5, "category": "Growth"},
      {"year": 2013, "indicator": "GDP Growth", "value": 2.1, "category": "Growth"},
      {"year": 2014, "indicator": "GDP Growth", "value": 2.6, "category": "Growth"},
      {"year": 2015, "indicator": "GDP Growth", "value": 2.4, "category": "Growth"},
      {"year": 2016, "indicator": "GDP Growth", "value": 2.2, "category": "Growth"},
      {"year": 2017, "indicator": "GDP Growth", "value": 2.1, "category": "Growth"},
      {"year": 2018, "indicator": "GDP Growth", "value": 1.7, "category": "Growth"},
      {"year": 2019, "indicator": "GDP Growth", "value": 1.7, "category": "Growth"},
      {"year": 2020, "indicator": "GDP Growth", "value": -9.3, "category": "Growth"},
      {"year": 2021, "indicator": "GDP Growth", "value": 7.6, "category": "Growth"},
      {"year": 2022, "indicator": "GDP Growth", "value": 4.1, "category": "Growth"},
      {"year": 2023, "indicator": "GDP Growth", "value": 0.5, "category": "Growth"},
      
      {"year": 2010, "indicator": "Inflation", "value": 3.3, "category": "Prices"},
      {"year": 2011, "indicator": "Inflation", "value": 4.5, "category": "Prices"},
      {"year": 2012, "indicator": "Inflation", "value": 2.8, "category": "Prices"},
      {"year": 2013, "indicator": "Inflation", "value": 2.6, "category": "Prices"},
      {"year": 2014, "indicator": "Inflation", "value": 1.5, "category": "Prices"},
      {"year": 2015, "indicator": "Inflation", "value": 0.0, "category": "Prices"},
      {"year": 2016, "indicator": "Inflation", "value": 0.7, "category": "Prices"},
      {"year": 2017, "indicator": "Inflation", "value": 2.7, "category": "Prices"},
      {"year": 2018, "indicator": "Inflation", "value": 2.5, "category": "Prices"},
      {"year": 2019, "indicator": "Inflation", "value": 1.8, "category": "Prices"},
      {"year": 2020, "indicator": "Inflation", "value": 0.9, "category": "Prices"},
      {"year": 2021, "indicator": "Inflation", "value": 2.6, "category": "Prices"},
      {"year": 2022, "indicator": "Inflation", "value": 9.1, "category": "Prices"},
      {"year": 2023, "indicator": "Inflation", "value": 7.3, "category": "Prices"},
      
      {"year": 2010, "indicator": "Unemployment", "value": 7.8, "category": "Labor"},
      {"year": 2011, "indicator": "Unemployment", "value": 8.1, "category": "Labor"},
      {"year": 2012, "indicator": "Unemployment", "value": 7.9, "category": "Labor"},
      {"year": 2013, "indicator": "Unemployment", "value": 7.6, "category": "Labor"},
      {"year": 2014, "indicator": "Unemployment", "value": 6.1, "category": "Labor"},
      {"year": 2015, "indicator": "Unemployment", "value": 5.3, "category": "Labor"},
      {"year": 2016, "indicator": "Unemployment", "value": 4.8, "category": "Labor"},
      {"year": 2017, "indicator": "Unemployment", "value": 4.4, "category": "Labor"},
      {"year": 2018, "indicator": "Unemployment", "value": 4.1, "category": "Labor"},
      {"year": 2019, "indicator": "Unemployment", "value": 3.8, "category": "Labor"},
      {"year": 2020, "indicator": "Unemployment", "value": 4.5, "category": "Labor"},
      {"year": 2021, "indicator": "Unemployment", "value": 4.6, "category": "Labor"},
      {"year": 2022, "indicator": "Unemployment", "value": 3.7, "category": "Labor"},
      {"year": 2023, "indicator": "Unemployment", "value": 4.2, "category": "Labor"},
      
      {"year": 2010, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2011, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2012, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2013, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2014, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2015, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2016, "indicator": "Interest Rate", "value": 0.25, "category": "Monetary"},
      {"year": 2017, "indicator": "Interest Rate", "value": 0.5, "category": "Monetary"},
      {"year": 2018, "indicator": "Interest Rate", "value": 0.75, "category": "Monetary"},
      {"year": 2019, "indicator": "Interest Rate", "value": 0.75, "category": "Monetary"},
      {"year": 2020, "indicator": "Interest Rate", "value": 0.1, "category": "Monetary"},
      {"year": 2021, "indicator": "Interest Rate", "value": 0.25, "category": "Monetary"},
      {"year": 2022, "indicator": "Interest Rate", "value": 3.5, "category": "Monetary"},
      {"year": 2023, "indicator": "Interest Rate", "value": 5.25, "category": "Monetary"}
    ]
  },
  "params": [
    {
      "name": "indicatorSelect",
      "value": "GDP Growth",
      "bind": {
        "input": "select",
        "options": ["GDP Growth", "Inflation", "Unemployment", "Interest Rate"],
        "labels": ["GDP Growth (%)", "Inflation Rate (%)", "Unemployment Rate (%)", "Interest Rate (%)"],
        "name": "Select Indicator: "
      }
    },
    {
      "name": "yearMin",
      "value": 2010,
      "bind": {
        "input": "range",
        "min": 2010,
        "max": 2023,
        "step": 1,
        "name": "Start Year: "
      }
    },
    {
      "name": "yearMax",
      "value": 2023,
      "bind": {
        "input": "range",
        "min": 2010,
        "max": 2023,
        "step": 1,
        "name": "End Year: "
      }
    },
    {
      "name": "showTrend",
      "value": false,
      "bind": {
        "input": "checkbox",
        "name": "Show Trend Line "
      }
    }
  ],
  "transform": [
    {"filter": "datum.indicator == indicatorSelect"},
    {"filter": "datum.year >= yearMin && datum.year <= yearMax"},
    {
      "window": [
        {"op": "mean", "field": "value", "as": "average"}
      ],
      "frame": [null, null]
    },
    {
      "calculate": "datum.value > datum.average ? 'Above Average' : 'Below Average'",
      "as": "performance"
    }
  ],
  "layer": [
    {
      "mark": {
        "type": "area",
        "opacity": 0.2,
        "interpolate": "monotone"
      },
      "encoding": {
        "x": {
          "field": "year",
          "type": "quantitative",
          "title": "Year",
          "axis": {
            "format": "d",
            "labelAngle": 0,
            "tickCount": {"expr": "yearMax - yearMin + 1"},
            "grid": false
          }
        },
        "y": {
          "field": "value",
          "type": "quantitative",
          "title": {"expr": "indicatorSelect + ' (%)'"},
          "scale": {"zero": false}
        },
        "color": {
          "field": "category",
          "type": "nominal",
          "scale": {
            "domain": ["Growth", "Prices", "Labor", "Monetary"],
            "range": ["#2ecc71", "#e74c3c", "#3498db", "#9b59b6"]
          },
          "legend": null
        }
      }
    },
    {
      "mark": {
        "type": "line",
        "strokeWidth": 3,
        "interpolate": "monotone"
      },
      "encoding": {
        "x": {"field": "year", "type": "quantitative"},
        "y": {"field": "value", "type": "quantitative"},
        "color": {
          "field": "category",
          "type": "nominal",
          "legend": null
        }
      }
    },
    {
      "mark": {
        "type": "point",
        "size": 120,
        "filled": true,
        "opacity": 1
      },
      "encoding": {
        "x": {"field": "year", "type": "quantitative"},
        "y": {"field": "value", "type": "quantitative"},
        "color": {
          "field": "category",
          "type": "nominal",
          "legend": null
        },
        "shape": {
          "field": "performance",
          "type": "nominal",
          "scale": {
            "domain": ["Above Average", "Below Average"],
            "range": ["circle", "triangle-down"]
          },
          "legend": {
            "title": "Performance",
            "orient": "top-right",
            "offset": 10
          }
        },
        "tooltip": [
          {"field": "indicator", "title": "Indicator"},
          {"field": "year", "type": "quantitative", "format": "d", "title": "Year"},
          {"field": "value", "type": "quantitative", "format": ".2f", "title": "Value (%)"},
          {"field": "average", "type": "quantitative", "format": ".2f", "title": "Period Average (%)"},
          {"field": "performance", "title": "Performance"}
        ]
      }
    },
    {
      "transform": [
        {"filter": "showTrend"},
        {
          "regression": "value",
          "on": "year",
          "method": "linear"
        }
      ],
      "mark": {
        "type": "line",
        "strokeDash": [8, 4],
        "strokeWidth": 2,
        "opacity": 0.7
      },
      "encoding": {
        "x": {"field": "year", "type": "quantitative"},
        "y": {"field": "value", "type": "quantitative"},
        "color": {"value": "#7f8c8d"}
      }
    },
    {
      "transform": [
        {
          "aggregate": [
            {"op": "mean", "field": "value", "as": "mean_value"}
          ]
        }
      ],
      "mark": {
        "type": "rule",
        "strokeDash": [4, 4],
        "opacity": 0.5
      },
      "encoding": {
        "y": {"field": "mean_value", "type": "quantitative"},
        "color": {"value": "#95a5a6"}
      }
    },
    {
      "transform": [
        {
          "aggregate": [
            {"op": "mean", "field": "value", "as": "mean_value"},
            {"op": "min", "field": "value", "as": "min_value"},
            {"op": "max", "field": "value", "as": "max_value"}
          ]
        }
      ],
      "mark": {
        "type": "text",
        "align": "left",
        "dx": 5,
        "dy": -5,
        "fontSize": 11,
        "fontStyle": "italic",
        "color": "#7f8c8d"
      },
      "encoding": {
        "x": {"value": 10},
        "y": {"value": 10},
        "text": {
          "value": {"expr": "'Min: ' + format(datum.min_value, '.1f') + '% | Mean: ' + format(datum.mean_value, '.1f') + '% | Max: ' + format(datum.max_value, '.1f') + '%'"}
        }
      }
    }
  ],
  "config": {
    "view": {
      "stroke": "transparent",
      "continuousWidth": 550,
      "continuousHeight": 400
    },
    "axis": {
      "labelFontSize": 12,
      "titleFontSize": 13,
      "titleFontWeight": "bold",
      "gridOpacity": 0.2,
      "domainOpacity": 0.4,
      "tickOpacity": 0.4
    },
    "background": "#ffffff"
  }
}