{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 400,
  "height": 500,
  "title": {
    "text": "Population by Local Authority in Wales",
    "fontSize": 16
  },
  "data": {
    "url": "https://raw.githubusercontent.com/martinjc/UK-GeoJSON/master/json/administrative/wls/topo_lad.json",
    "format": {"type": "topojson", "feature": "lad"}
  },
  "transform": [
    {
      "lookup": "properties.LAD13CD",
      "from": {
        "data": {"values": [
          {"code": "W06000001", "pop": 70, "name": "Isle of Anglesey"},
          {"code": "W06000002", "pop": 125, "name": "Gwynedd"},
          {"code": "W06000003", "pop": 118, "name": "Conwy"},
          {"code": "W06000004", "pop": 95, "name": "Denbighshire"},
          {"code": "W06000005", "pop": 156, "name": "Flintshire"},
          {"code": "W06000006", "pop": 136, "name": "Wrexham"},
          {"code": "W06000008", "pop": 71, "name": "Ceredigion"},
          {"code": "W06000009", "pop": 126, "name": "Pembrokeshire"},
          {"code": "W06000010", "pop": 188, "name": "Carmarthenshire"},
          {"code": "W06000011", "pop": 246, "name": "Swansea"},
          {"code": "W06000012", "pop": 144, "name": "Neath Port Talbot"},
          {"code": "W06000013", "pop": 147, "name": "Bridgend"},
          {"code": "W06000014", "pop": 135, "name": "Vale of Glamorgan"},
          {"code": "W06000015", "pop": 362, "name": "Cardiff"},
          {"code": "W06000016", "pop": 241, "name": "Rhondda Cynon Taf"},
          {"code": "W06000018", "pop": 176, "name": "Caerphilly"},
          {"code": "W06000019", "pop": 70, "name": "Blaenau Gwent"},
          {"code": "W06000020", "pop": 94, "name": "Torfaen"},
          {"code": "W06000021", "pop": 95, "name": "Monmouthshire"},
          {"code": "W06000022", "pop": 159, "name": "Newport"},
          {"code": "W06000023", "pop": 133, "name": "Powys"},
          {"code": "W06000024", "pop": 60, "name": "Merthyr Tydfil"}
        ]},
        "key": "code",
        "fields": ["pop", "name"]
      }
    }
  ],
  "mark": {"type": "geoshape", "stroke": "#666", "strokeWidth": 0.5},
  "encoding": {
    "color": {
      "field": "pop",
      "type": "quantitative",
      "scale": {"scheme": "blues"},
      "legend": {"title": "Population (thousands)", "orient": "bottom-right"}
    },
    "tooltip": [
      {"field": "name", "title": "Local Authority"},
      {"field": "pop", "title": "Population (thousands)", "format": ","}
    ]
  }
}